NLP & Wordcloud
================
Li-Hsin Chien
2024-01-24

### 1. 所需要的 R 套件

``` r
#install.packages("jiebaR")
#install.packages("quanteda")
#install.packages("stringr")              
#install.packages("dplyr")
#install.packages("wordcloud")
#install.packages("wordcloud2")

library(wordcloud2)
library(wordcloud)
library(dplyr)
library("stringr")  
library(quanteda)
library(jiebaR)
```

### 2. 輸入文字 (原始文本)

``` r
text <- "在達爾豪西大學的最新研究中，科學家們正在使用人工智慧（AI）來解碼雞的語言。沒錯，沒看錯，是雞的語言！就像人類一樣，雞也有自己的溝通方式，牠們的咯咯叫聲並非隨機無章，而是一種複雜的語言系統。根據外媒《The Conversation》報導，這項研究不僅是學術上的突破，更可能會徹底改變對禽畜的飼養方式。科學家們利用AI和機器學習技術，就像是打造了一個全能的雞語翻譯機，可以分析大量的音頻數據，學習辨識雞叫聲中的模式和細微差別。

這項研究的另一大亮點是理解雞的情感內容。運用自然語言處理（NLP）技術，科學家們正在學習解讀雞的情緒狀態，比如牠們何時感到壓力，何時感到滿足。透過這些了解，我們可以更精確地決定如何照顧牠們，從而提高牠們的生活品質。除了聲音外，研究還涉及雞的非語言溝通方式，例如透過影片和熱成像技術來觀察雞的眼睛閃爍和面部溫度，這些可能是感受壓力時的可靠指標。

這項創新研究的實際應用範圍廣泛，不僅僅是在學術上引起興趣，它對農業部門也大有裨益。了解雞的叫聲可以幫助農民創造更好的生活條件，使雞隻更健康、更快樂。這不僅提升了農場的效率，也提高了產品的品質。不僅如此，這項研究還有潛力影響動物福利和道德治療的政策。隨著人類對這些動物的了解加深，也更有動力為它們的福利發聲。這項研究正在重塑我們與動物的關係，強調同理心和理解。通過AI技術的幫助，不僅解開了禽鳥溝通的秘密，也為動物福利和科技的倫理使用樹立了新標準。在這個令人興奮的時刻，正站在了解人類和動物世界新時代的門檻上，而這一切都是從雞開始的。"
```

### 3. 無設定下的分詞結果 (Tokenizing)

``` r
cutter<-worker()
cutter[text]
```

    ##   [1] "在"           "達爾"         "豪西"         "大學"         "的"          
    ##   [6] "最新"         "研究"         "中"           "科學家"       "們"          
    ##  [11] "正在"         "使用"         "人工智慧"     "AI"           "來"          
    ##  [16] "解碼"         "雞"           "的"           "語言"         "沒錯"        
    ##  [21] "沒看"         "錯"           "是"           "雞"           "的"          
    ##  [26] "語言"         "就"           "像"           "人類"         "一樣"        
    ##  [31] "雞"           "也"           "有"           "自己"         "的"          
    ##  [36] "溝通"         "方式"         "牠"           "們"           "的"          
    ##  [41] "咯咯"         "叫聲"         "並非"         "隨機"         "無章"        
    ##  [46] "而是"         "一種"         "複雜"         "的"           "語言"        
    ##  [51] "系統"         "根據"         "外媒"         "The"          "Conversation"
    ##  [56] "報導"         "這項"         "研究"         "不僅"         "是"          
    ##  [61] "學術"         "上"           "的"           "突破"         "更"          
    ##  [66] "可能"         "會"           "徹底改變"     "對"           "禽畜"        
    ##  [71] "的"           "飼養"         "方式"         "科學家"       "們"          
    ##  [76] "利用"         "AI"           "和"           "機器"         "學習"        
    ##  [81] "技術"         "就"           "像是"         "打造"         "了"          
    ##  [86] "一個"         "全能"         "的"           "雞語"         "翻譯機"      
    ##  [91] "可以"         "分析"         "大量"         "的"           "音頻"        
    ##  [96] "數據"         "學習"         "辨識"         "雞"           "叫聲"        
    ## [101] "中"           "的"           "模式"         "和"           "細微差別"    
    ## [106] "這項"         "研究"         "的"           "另"           "一大"        
    ## [111] "亮點"         "是"           "理解"         "雞"           "的"          
    ## [116] "情感"         "內容"         "運用"         "自然語言"     "處理"        
    ## [121] "NLP"          "技術"         "科學家"       "們"           "正在"        
    ## [126] "學習"         "解讀"         "雞"           "的"           "情緒"        
    ## [131] "狀態"         "比如"         "牠"           "們"           "何時"        
    ## [136] "感到"         "壓力"         "何時"         "感到"         "滿足"        
    ## [141] "透過"         "這些"         "了解"         "我們"         "可以"        
    ## [146] "更"           "精確"         "地"           "決定"         "如何"        
    ## [151] "照顧"         "牠"           "們"           "從而"         "提高"        
    ## [156] "牠"           "們"           "的"           "生活品質"     "除了"        
    ## [161] "聲音"         "外"           "研究"         "還"           "涉及"        
    ## [166] "雞"           "的"           "非"           "語言"         "溝通"        
    ## [171] "方式"         "例如"         "透過"         "影片"         "和熱"        
    ## [176] "成像"         "技術"         "來"           "觀察"         "雞"          
    ## [181] "的"           "眼睛"         "閃爍"         "和"           "面部"        
    ## [186] "溫度"         "這些"         "可能"         "是"           "感受"        
    ## [191] "壓力"         "時"           "的"           "可靠"         "指標"        
    ## [196] "這項"         "創新"         "研究"         "的"           "實際"        
    ## [201] "應用"         "範圍"         "廣泛"         "不僅僅"       "是"          
    ## [206] "在"           "學術"         "上"           "引起"         "興趣"        
    ## [211] "它"           "對"           "農業部門"     "也"           "大有裨益"    
    ## [216] "了解"         "雞"           "的"           "叫聲"         "可以"        
    ## [221] "幫助"         "農民"         "創造"         "更好"         "的"          
    ## [226] "生活"         "條件"         "使雞"         "隻"           "更"          
    ## [231] "健康"         "更"           "快樂"         "這"           "不僅"        
    ## [236] "提升"         "了"           "農場"         "的"           "效率"        
    ## [241] "也"           "提高"         "了"           "產品"         "的"          
    ## [246] "品質"         "不僅如此"     "這項"         "研究"         "還有"        
    ## [251] "潛力"         "影響"         "動物"         "福利"         "和"          
    ## [256] "道德"         "治療"         "的"           "政策"         "隨著"        
    ## [261] "人類"         "對"           "這些"         "動物"         "的"          
    ## [266] "了解"         "加深"         "也"           "更"           "有"          
    ## [271] "動力"         "為"           "它們"         "的"           "福利"        
    ## [276] "發聲"         "這項"         "研究"         "正在"         "重塑"        
    ## [281] "我們"         "與"           "動物"         "的"           "關係"        
    ## [286] "強調"         "同理"         "心"           "和"           "理解"        
    ## [291] "通過"         "AI"           "技術"         "的"           "幫助"        
    ## [296] "不僅"         "解開"         "了"           "禽鳥"         "溝通"        
    ## [301] "的"           "秘密"         "也"           "為"           "動物"        
    ## [306] "福利"         "和"           "科技"         "的"           "倫理"        
    ## [311] "使用"         "樹立"         "了"           "新"           "標準"        
    ## [316] "在"           "這個"         "令人興奮"     "的"           "時刻"        
    ## [321] "正站"         "在"           "了解"         "人類"         "和"          
    ## [326] "動物"         "世界"         "新"           "時代"         "的"          
    ## [331] "門檻"         "上"           "而"           "這"           "一切"        
    ## [336] "都"           "是從"         "雞"           "開始"         "的"

### 4. 清洗 (Cleaning): 去掉數字、英文…等

``` r
content <- str_remove_all(text, "[0-9a-zA-Z.]+?")
content2 <- content[is.na(content)==F]
cutter[content2]
```

    ##   [1] "在"       "達爾"     "豪西"     "大學"     "的"       "最新"    
    ##   [7] "研究"     "中"       "科學家"   "們"       "正在"     "使用"    
    ##  [13] "人工智慧" "來"       "解碼"     "雞"       "的"       "語言"    
    ##  [19] "沒錯"     "沒看"     "錯"       "是"       "雞"       "的"      
    ##  [25] "語言"     "就"       "像"       "人類"     "一樣"     "雞"      
    ##  [31] "也"       "有"       "自己"     "的"       "溝通"     "方式"    
    ##  [37] "牠"       "們"       "的"       "咯咯"     "叫聲"     "並非"    
    ##  [43] "隨機"     "無章"     "而是"     "一種"     "複雜"     "的"      
    ##  [49] "語言"     "系統"     "根據"     "外媒"     "報導"     "這項"    
    ##  [55] "研究"     "不僅"     "是"       "學術"     "上"       "的"      
    ##  [61] "突破"     "更"       "可能"     "會"       "徹底改變" "對"      
    ##  [67] "禽畜"     "的"       "飼養"     "方式"     "科學家"   "們"      
    ##  [73] "利用"     "和"       "機器"     "學習"     "技術"     "就"      
    ##  [79] "像是"     "打造"     "了"       "一個"     "全能"     "的"      
    ##  [85] "雞語"     "翻譯機"   "可以"     "分析"     "大量"     "的"      
    ##  [91] "音頻"     "數據"     "學習"     "辨識"     "雞"       "叫聲"    
    ##  [97] "中"       "的"       "模式"     "和"       "細微差別" "這項"    
    ## [103] "研究"     "的"       "另"       "一大"     "亮點"     "是"      
    ## [109] "理解"     "雞"       "的"       "情感"     "內容"     "運用"    
    ## [115] "自然語言" "處理"     "技術"     "科學家"   "們"       "正在"    
    ## [121] "學習"     "解讀"     "雞"       "的"       "情緒"     "狀態"    
    ## [127] "比如"     "牠"       "們"       "何時"     "感到"     "壓力"    
    ## [133] "何時"     "感到"     "滿足"     "透過"     "這些"     "了解"    
    ## [139] "我們"     "可以"     "更"       "精確"     "地"       "決定"    
    ## [145] "如何"     "照顧"     "牠"       "們"       "從而"     "提高"    
    ## [151] "牠"       "們"       "的"       "生活品質" "除了"     "聲音"    
    ## [157] "外"       "研究"     "還"       "涉及"     "雞"       "的"      
    ## [163] "非"       "語言"     "溝通"     "方式"     "例如"     "透過"    
    ## [169] "影片"     "和熱"     "成像"     "技術"     "來"       "觀察"    
    ## [175] "雞"       "的"       "眼睛"     "閃爍"     "和"       "面部"    
    ## [181] "溫度"     "這些"     "可能"     "是"       "感受"     "壓力"    
    ## [187] "時"       "的"       "可靠"     "指標"     "這項"     "創新"    
    ## [193] "研究"     "的"       "實際"     "應用"     "範圍"     "廣泛"    
    ## [199] "不僅僅"   "是"       "在"       "學術"     "上"       "引起"    
    ## [205] "興趣"     "它"       "對"       "農業部門" "也"       "大有裨益"
    ## [211] "了解"     "雞"       "的"       "叫聲"     "可以"     "幫助"    
    ## [217] "農民"     "創造"     "更好"     "的"       "生活"     "條件"    
    ## [223] "使雞"     "隻"       "更"       "健康"     "更"       "快樂"    
    ## [229] "這"       "不僅"     "提升"     "了"       "農場"     "的"      
    ## [235] "效率"     "也"       "提高"     "了"       "產品"     "的"      
    ## [241] "品質"     "不僅如此" "這項"     "研究"     "還有"     "潛力"    
    ## [247] "影響"     "動物"     "福利"     "和"       "道德"     "治療"    
    ## [253] "的"       "政策"     "隨著"     "人類"     "對"       "這些"    
    ## [259] "動物"     "的"       "了解"     "加深"     "也"       "更"      
    ## [265] "有"       "動力"     "為"       "它們"     "的"       "福利"    
    ## [271] "發聲"     "這項"     "研究"     "正在"     "重塑"     "我們"    
    ## [277] "與"       "動物"     "的"       "關係"     "強調"     "同理"    
    ## [283] "心"       "和"       "理解"     "通過"     "技術"     "的"      
    ## [289] "幫助"     "不僅"     "解開"     "了"       "禽鳥"     "溝通"    
    ## [295] "的"       "秘密"     "也"       "為"       "動物"     "福利"    
    ## [301] "和"       "科技"     "的"       "倫理"     "使用"     "樹立"    
    ## [307] "了"       "新"       "標準"     "在"       "這個"     "令人興奮"
    ## [313] "的"       "時刻"     "正站"     "在"       "了解"     "人類"    
    ## [319] "和"       "動物"     "世界"     "新"       "時代"     "的"      
    ## [325] "門檻"     "上"       "而"       "這"       "一切"     "都"      
    ## [331] "是從"     "雞"       "開始"     "的"

### 5. 加入專有名詞 (New words)

``` r
new_words <- c("雞語翻譯機","達爾豪西大學","人工智慧")
writeLines(new_words, "new_words.txt")
```

### 6. 設定停止詞 (Stop words)

``` r
stop_words <- c("在","的","下","個","來","至","座","亦","與","或","日","月","年","週","是","又","了","推","都","不","你","我","就","也","有","要","去","到","沒","看","會","好","跟","想","說","很","人","嗎","可以","真的","們","更","這項","這","和","牠")
writeLines(stop_words, "stop_words.txt")
```

### 7. 重新定義斷詞器，匯入停止詞

``` r
cutter <- worker(user = "new_words.txt", stop_word = "stop_words.txt", bylines = FALSE)
seg_words <- cutter[content2]
seg_words
```

    ##   [1] "達爾豪西大學" "最新"         "研究"         "中"           "科學家"      
    ##   [6] "正在"         "使用"         "人工智慧"     "解碼"         "雞"          
    ##  [11] "語言"         "沒錯"         "沒看"         "錯"           "雞"          
    ##  [16] "語言"         "像"           "人類"         "一樣"         "雞"          
    ##  [21] "自己"         "溝通"         "方式"         "咯咯"         "叫聲"        
    ##  [26] "並非"         "隨機"         "無章"         "而是"         "一種"        
    ##  [31] "複雜"         "語言"         "系統"         "根據"         "外媒"        
    ##  [36] "報導"         "研究"         "不僅"         "學術"         "上"          
    ##  [41] "突破"         "可能"         "徹底改變"     "對"           "禽畜"        
    ##  [46] "飼養"         "方式"         "科學家"       "利用"         "機器"        
    ##  [51] "學習"         "技術"         "像是"         "打造"         "一個"        
    ##  [56] "全能"         "雞語翻譯機"   "分析"         "大量"         "音頻"        
    ##  [61] "數據"         "學習"         "辨識"         "雞"           "叫聲"        
    ##  [66] "中"           "模式"         "細微差別"     "研究"         "另"          
    ##  [71] "一大"         "亮點"         "理解"         "雞"           "情感"        
    ##  [76] "內容"         "運用"         "自然語言"     "處理"         "技術"        
    ##  [81] "科學家"       "正在"         "學習"         "解讀"         "雞"          
    ##  [86] "情緒"         "狀態"         "比如"         "何時"         "感到"        
    ##  [91] "壓力"         "何時"         "感到"         "滿足"         "透過"        
    ##  [96] "這些"         "了解"         "我們"         "精確"         "地"          
    ## [101] "決定"         "如何"         "照顧"         "從而"         "提高"        
    ## [106] "生活品質"     "除了"         "聲音"         "外"           "研究"        
    ## [111] "還"           "涉及"         "雞"           "非"           "語言"        
    ## [116] "溝通"         "方式"         "例如"         "透過"         "影片"        
    ## [121] "和熱"         "成像"         "技術"         "觀察"         "雞"          
    ## [126] "眼睛"         "閃爍"         "面部"         "溫度"         "這些"        
    ## [131] "可能"         "感受"         "壓力"         "時"           "可靠"        
    ## [136] "指標"         "創新"         "研究"         "實際"         "應用"        
    ## [141] "範圍"         "廣泛"         "不僅僅"       "學術"         "上"          
    ## [146] "引起"         "興趣"         "它"           "對"           "農業部門"    
    ## [151] "大有裨益"     "了解"         "雞"           "叫聲"         "幫助"        
    ## [156] "農民"         "創造"         "更好"         "生活"         "條件"        
    ## [161] "使雞"         "隻"           "健康"         "快樂"         "不僅"        
    ## [166] "提升"         "農場"         "效率"         "提高"         "產品"        
    ## [171] "品質"         "不僅如此"     "研究"         "還有"         "潛力"        
    ## [176] "影響"         "動物"         "福利"         "道德"         "治療"        
    ## [181] "政策"         "隨著"         "人類"         "對"           "這些"        
    ## [186] "動物"         "了解"         "加深"         "動力"         "為"          
    ## [191] "它們"         "福利"         "發聲"         "研究"         "正在"        
    ## [196] "重塑"         "我們"         "動物"         "關係"         "強調"        
    ## [201] "同理"         "心"           "理解"         "通過"         "技術"        
    ## [206] "幫助"         "不僅"         "解開"         "禽鳥"         "溝通"        
    ## [211] "秘密"         "為"           "動物"         "福利"         "科技"        
    ## [216] "倫理"         "使用"         "樹立"         "新"           "標準"        
    ## [221] "這個"         "令人興奮"     "時刻"         "正站"         "了解"        
    ## [226] "人類"         "動物"         "世界"         "新"           "時代"        
    ## [231] "門檻"         "上"           "而"           "一切"         "是從"        
    ## [236] "雞"           "開始"

### 8. 文字雲 (Word cloud)

``` r
# 計算詞彙頻率
txt_freq <- freq(seg_words)
# 由大到小排列
txt_freq <- arrange(txt_freq, desc(freq))
# 檢查前10名
head(txt_freq,10)
```

    ##    char freq
    ## 1    雞   10
    ## 2  研究    7
    ## 3  動物    5
    ## 4  語言    4
    ## 5  技術    4
    ## 6  了解    4
    ## 7  福利    3
    ## 8    上    3
    ## 9  不僅    3
    ## 10 叫聲    3

``` r
#par(family=("Microsoft YaHei")) #一般wordcloud需要定義字體，不然會無法顯示中文
# 一般的文字雲 (pkg: wordcloud)

wordcloud2(filter(txt_freq, freq > 1), 
           minSize = 2, fontFamily = "Microsoft YaHei", size = 1)
```

![](nlp_wordcloud_files/figure-gfm/unnamed-chunk-8-1.png)<!-- -->

``` r
wordcloud(txt_freq$char, txt_freq$freq, min.freq = 2, random.order = F, ordered.colors = F,  colors=brewer.pal(8, "Dark2"))
```

![](nlp_wordcloud_files/figure-gfm/unnamed-chunk-8-2.png)<!-- -->
